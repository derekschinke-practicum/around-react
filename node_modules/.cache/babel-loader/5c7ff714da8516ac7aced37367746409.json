{"ast":null,"code":"import _regeneratorRuntime from\"/Users/derekschinke/Documents/Developer/Practicum by Yandex/Web Developer/dev/around-react/.yarn/cache/@babel-runtime-npm-7.12.1-b069f70b16-979d1c099c.zip/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/derekschinke/Documents/Developer/Practicum by Yandex/Web Developer/dev/around-react/.yarn/cache/@babel-runtime-npm-7.12.1-b069f70b16-979d1c099c.zip/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"/Users/derekschinke/Documents/Developer/Practicum by Yandex/Web Developer/dev/around-react/.yarn/cache/@babel-runtime-npm-7.12.1-b069f70b16-979d1c099c.zip/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/derekschinke/Documents/Developer/Practicum by Yandex/Web Developer/dev/around-react/.yarn/cache/@babel-runtime-npm-7.12.1-b069f70b16-979d1c099c.zip/node_modules/@babel/runtime/helpers/esm/createClass\";var Api=/*#__PURE__*/function(){function Api(options){_classCallCheck(this,Api);this.baseUrl=options.baseUrl;this.headers=options.headers;}_createClass(Api,[{key:\"getInitialCardsAndUserInfo\",value:function getInitialCardsAndUserInfo(){return Promise.all([this.getInitialCards(),this.getUserInfo()]);}},{key:\"getUserInfo\",value:function(){var _getUserInfo=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var res;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return fetch(this.baseUrl+'/users/me',{headers:this.headers});case 2:res=_context.sent;if(!res.ok){_context.next=5;break;}return _context.abrupt(\"return\",res.json());case 5:return _context.abrupt(\"return\",Promise.reject(\"Error: \".concat(res.status)));case 6:case\"end\":return _context.stop();}}},_callee,this);}));function getUserInfo(){return _getUserInfo.apply(this,arguments);}return getUserInfo;}()},{key:\"getInitialCards\",value:function(){var _getInitialCards=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var res;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return fetch(this.baseUrl+'/cards',{headers:this.headers});case 2:res=_context2.sent;if(!res.ok){_context2.next=5;break;}return _context2.abrupt(\"return\",res.json());case 5:return _context2.abrupt(\"return\",Promise.reject(\"Error: \".concat(res.status)));case 6:case\"end\":return _context2.stop();}}},_callee2,this);}));function getInitialCards(){return _getInitialCards.apply(this,arguments);}return getInitialCards;}()},{key:\"updateCardLikes\",value:function(){var _updateCardLikes=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(cardId,isLiked){var method,res;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:method=isLiked?'DELETE':'PUT';_context3.next=3;return fetch(this.baseUrl+'/cards/likes/'+cardId,{headers:this.headers,method:method});case 3:res=_context3.sent;if(!res.ok){_context3.next=6;break;}return _context3.abrupt(\"return\",res.json());case 6:return _context3.abrupt(\"return\",Promise.reject(\"Error: \".concat(res.status)));case 7:case\"end\":return _context3.stop();}}},_callee3,this);}));function updateCardLikes(_x,_x2){return _updateCardLikes.apply(this,arguments);}return updateCardLikes;}()},{key:\"deleteCard\",value:function(){var _deleteCard=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(cardId){var res;return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:_context4.next=2;return fetch(this.baseUrl+'/cards/'+cardId,{headers:this.headers,method:'DELETE'});case 2:res=_context4.sent;if(!res.ok){_context4.next=5;break;}return _context4.abrupt(\"return\",res.json());case 5:return _context4.abrupt(\"return\",Promise.reject(\"Error: \".concat(res.status)));case 6:case\"end\":return _context4.stop();}}},_callee4,this);}));function deleteCard(_x3){return _deleteCard.apply(this,arguments);}return deleteCard;}()},{key:\"postCard\",value:function(){var _postCard=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee5(_ref){var title,url,res;return _regeneratorRuntime.wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:title=_ref.title,url=_ref.url;_context5.next=3;return fetch(this.baseUrl+'/cards',{headers:this.headers,method:'POST',body:JSON.stringify({name:title,link:url})});case 3:res=_context5.sent;if(!res.ok){_context5.next=6;break;}return _context5.abrupt(\"return\",res.json());case 6:return _context5.abrupt(\"return\",Promise.reject(\"Error: \".concat(res.status)));case 7:case\"end\":return _context5.stop();}}},_callee5,this);}));function postCard(_x4){return _postCard.apply(this,arguments);}return postCard;}()},{key:\"patchAvatarImage\",value:function(){var _patchAvatarImage=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee6(url){var res;return _regeneratorRuntime.wrap(function _callee6$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:_context6.next=2;return fetch(this.baseUrl+'/users/me/avatar',{headers:this.headers,method:'PATCH',body:JSON.stringify({avatar:url})});case 2:res=_context6.sent;if(!res.ok){_context6.next=5;break;}return _context6.abrupt(\"return\",res.json());case 5:return _context6.abrupt(\"return\",Promise.reject(\"Error: \".concat(res.status)));case 6:case\"end\":return _context6.stop();}}},_callee6,this);}));function patchAvatarImage(_x5){return _patchAvatarImage.apply(this,arguments);}return patchAvatarImage;}()},{key:\"patchUserInfo\",value:function(){var _patchUserInfo=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee7(info){var res;return _regeneratorRuntime.wrap(function _callee7$(_context7){while(1){switch(_context7.prev=_context7.next){case 0:_context7.next=2;return fetch(this.baseUrl+'/users/me',{headers:this.headers,method:'PATCH',body:JSON.stringify({name:info.name,about:info.job})});case 2:res=_context7.sent;if(!res.ok){_context7.next=5;break;}return _context7.abrupt(\"return\",res.json());case 5:return _context7.abrupt(\"return\",Promise.reject(\"Error: \".concat(res.status)));case 6:case\"end\":return _context7.stop();}}},_callee7,this);}));function patchUserInfo(_x6){return _patchUserInfo.apply(this,arguments);}return patchUserInfo;}()}]);return Api;}();var api=new Api({baseUrl:'https://around.nomoreparties.co/v1/group-5',headers:{authorization:'8cd049ee-8ebb-4e3d-8437-51e87560cee5','Content-Type':'application/json'}});export default api;","map":{"version":3,"sources":["/Users/derekschinke/Documents/Developer/Practicum by Yandex/Web Developer/dev/around-react/src/utils/api.js"],"names":["Api","options","baseUrl","headers","Promise","all","getInitialCards","getUserInfo","fetch","res","ok","json","reject","status","cardId","isLiked","method","title","url","body","JSON","stringify","name","link","avatar","info","about","job","api","authorization"],"mappings":"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","sourcesContent":["class Api {\n  constructor(options) {\n    this.baseUrl = options.baseUrl;\n    this.headers = options.headers;\n  }\n\n  getInitialCardsAndUserInfo() {\n    return Promise.all([this.getInitialCards(), this.getUserInfo()]);\n  }\n\n  async getUserInfo() {\n    const res = await fetch(this.baseUrl + '/users/me', {\n      headers: this.headers,\n    });\n    if (res.ok) {\n      return res.json();\n    }\n    return Promise.reject(`Error: ${res.status}`);\n  }\n\n  async getInitialCards() {\n    const res = await fetch(this.baseUrl + '/cards', {\n      headers: this.headers,\n    });\n    if (res.ok) {\n      return res.json();\n    }\n    return Promise.reject(`Error: ${res.status}`);\n  }\n\n  async updateCardLikes(cardId, isLiked) {\n    const method = isLiked ? 'DELETE' : 'PUT';\n    const res = await fetch(this.baseUrl + '/cards/likes/' + cardId, {\n      headers: this.headers,\n      method: method,\n    });\n    if (res.ok) {\n      return res.json();\n    }\n    return Promise.reject(`Error: ${res.status}`);\n  }\n\n  async deleteCard(cardId) {\n    const res = await fetch(this.baseUrl + '/cards/' + cardId, {\n      headers: this.headers,\n      method: 'DELETE',\n    });\n    if (res.ok) {\n      return res.json();\n    }\n    return Promise.reject(`Error: ${res.status}`);\n  }\n\n  async postCard({ title, url }) {\n    const res = await fetch(this.baseUrl + '/cards', {\n      headers: this.headers,\n      method: 'POST',\n      body: JSON.stringify({ name: title, link: url }),\n    });\n    if (res.ok) {\n      return res.json();\n    }\n    return Promise.reject(`Error: ${res.status}`);\n  }\n\n  async patchAvatarImage(url) {\n    const res = await fetch(this.baseUrl + '/users/me/avatar', {\n      headers: this.headers,\n      method: 'PATCH',\n      body: JSON.stringify({ avatar: url }),\n    });\n    if (res.ok) {\n      return res.json();\n    }\n    return Promise.reject(`Error: ${res.status}`);\n  }\n\n  async patchUserInfo(info) {\n    const res = await fetch(this.baseUrl + '/users/me', {\n      headers: this.headers,\n      method: 'PATCH',\n      body: JSON.stringify({ name: info.name, about: info.job }),\n    });\n    if (res.ok) {\n      return res.json();\n    }\n    return Promise.reject(`Error: ${res.status}`);\n  }\n}\n\nconst api = new Api({\n  baseUrl: 'https://around.nomoreparties.co/v1/group-5',\n  headers: {\n    authorization: '8cd049ee-8ebb-4e3d-8437-51e87560cee5',\n    'Content-Type': 'application/json',\n  },\n});\n\nexport default api;\n"]},"metadata":{},"sourceType":"module"}