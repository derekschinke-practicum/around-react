(this["webpackJsonparound-react"]=this["webpackJsonparound-react"]||[]).push([[0],{15:function(e,t,a){},17:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a(1),s=a(6),c=a.n(s),i=(a(14),a(15),a(3));var o=function(){return Object(r.jsx)("footer",{className:"footer",children:Object(r.jsx)("p",{className:"footer__text",children:"\xa9 2020 Around The U.S."})})};var u=function(){return Object(r.jsx)("header",{className:"header",children:Object(r.jsx)("div",{role:"img","aria-label":"Around The U.S.",className:"header__logo"})})},l=a(2),p=a.n(l),b=a(4),d=a(7),j=a(8),h=new(function(){function e(t){Object(d.a)(this,e),this.baseUrl=t.baseUrl,this.headers=t.headers}return Object(j.a)(e,[{key:"getInitialCardsAndUserInfo",value:function(){return Promise.all([this.getInitialCards(),this.getUserInfo()])}},{key:"getUserInfo",value:function(){var e=Object(b.a)(p.a.mark((function e(){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(this.baseUrl+"/users/me",{headers:this.headers});case 2:if(!(t=e.sent).ok){e.next=5;break}return e.abrupt("return",t.json());case 5:return e.abrupt("return",Promise.reject("Error: ".concat(t.status)));case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getInitialCards",value:function(){var e=Object(b.a)(p.a.mark((function e(){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(this.baseUrl+"/cards",{headers:this.headers});case 2:if(!(t=e.sent).ok){e.next=5;break}return e.abrupt("return",t.json());case 5:return e.abrupt("return",Promise.reject("Error: ".concat(t.status)));case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"updateCardLikes",value:function(){var e=Object(b.a)(p.a.mark((function e(t,a){var r,n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a?"DELETE":"PUT",e.next=3,fetch(this.baseUrl+"/cards/likes/"+t,{headers:this.headers,method:r});case 3:if(!(n=e.sent).ok){e.next=6;break}return e.abrupt("return",n.json());case 6:return e.abrupt("return",Promise.reject("Error: ".concat(n.status)));case 7:case"end":return e.stop()}}),e,this)})));return function(t,a){return e.apply(this,arguments)}}()},{key:"deleteCard",value:function(){var e=Object(b.a)(p.a.mark((function e(t){var a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(this.baseUrl+"/cards/"+t,{headers:this.headers,method:"DELETE"});case 2:if(!(a=e.sent).ok){e.next=5;break}return e.abrupt("return",a.json());case 5:return e.abrupt("return",Promise.reject("Error: ".concat(a.status)));case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"postCard",value:function(){var e=Object(b.a)(p.a.mark((function e(t){var a,r,n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.title,r=t.url,e.next=3,fetch(this.baseUrl+"/cards",{headers:this.headers,method:"POST",body:JSON.stringify({name:a,link:r})});case 3:if(!(n=e.sent).ok){e.next=6;break}return e.abrupt("return",n.json());case 6:return e.abrupt("return",Promise.reject("Error: ".concat(n.status)));case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"patchAvatarImage",value:function(){var e=Object(b.a)(p.a.mark((function e(t){var a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(this.baseUrl+"/users/me/avatar",{headers:this.headers,method:"PATCH",body:JSON.stringify({avatar:t})});case 2:if(!(a=e.sent).ok){e.next=5;break}return e.abrupt("return",a.json());case 5:return e.abrupt("return",Promise.reject("Error: ".concat(a.status)));case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"patchUserInfo",value:function(){var e=Object(b.a)(p.a.mark((function e(t){var a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(this.baseUrl+"/users/me",{headers:this.headers,method:"PATCH",body:JSON.stringify({name:t.name,about:t.job})});case 2:if(!(a=e.sent).ok){e.next=5;break}return e.abrupt("return",a.json());case 5:return e.abrupt("return",Promise.reject("Error: ".concat(a.status)));case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}())({baseUrl:"https://around.nomoreparties.co/v1/group-5",headers:{authorization:"8cd049ee-8ebb-4e3d-8437-51e87560cee5","Content-Type":"application/json"}});var m=function(e){return Object(r.jsxs)("li",{className:"card",children:[Object(r.jsx)("button",{type:"button",className:"button button_type_delete"}),Object(r.jsx)("div",{role:"img",className:"card__image",style:{backgroundImage:"url(".concat(e.link,")")},alt:e.name,onClick:e.onCardClick}),Object(r.jsxs)("div",{className:"card__info",children:[Object(r.jsx)("h2",{className:"card__title",children:e.name}),Object(r.jsxs)("div",{children:[Object(r.jsx)("button",{type:"button","aria-label":"Like",className:"button button_type_like"}),Object(r.jsx)("p",{className:"card__likes",children:e.likes})]})]})]})};var f=function(e){var t=Object(n.useState)(""),a=Object(i.a)(t,2),s=a[0],c=a[1],o=Object(n.useState)(""),u=Object(i.a)(o,2),l=u[0],p=u[1],b=Object(n.useState)(""),d=Object(i.a)(b,2),j=d[0],f=d[1],_=Object(n.useState)([]),O=Object(i.a)(_,2),x=O[0],v=O[1];return Object(n.useEffect)((function(){h.getUserInfo().then((function(e){c(e.avatar),p(e.name),f(e.about)})).catch((function(e){return console.log(e)})),h.getInitialCards().then((function(e){return v(e.map((function(e){return{link:e.link,name:e.name,likes:e.likes}})))})).catch((function(e){return console.log(e)}))}),[]),Object(r.jsxs)("main",{className:"main",children:[Object(r.jsxs)("section",{className:"profile",children:[Object(r.jsxs)("div",{className:"profile__data",children:[Object(r.jsxs)("div",{children:[Object(r.jsx)("div",{role:"img","aria-label":"",className:"profile__avatar",style:{backgroundImage:"url(".concat(s,")")},onClick:e.onEditAvatar}),Object(r.jsx)("button",{type:"button","aria-label":"Edit avatar",className:"button button_type_edit-avatar",onClick:e.onEditAvatar})]}),Object(r.jsxs)("div",{className:"profile__info",children:[Object(r.jsxs)("div",{className:"profile__text",children:[Object(r.jsx)("h1",{className:"profile__name",children:l}),Object(r.jsx)("p",{className:"profile__job",children:j})]}),Object(r.jsx)("button",{type:"button","aria-label":"Edit profile",className:"button button_type_edit",onClick:e.onEditProfile})]})]}),Object(r.jsx)("button",{"aria-label":"Add card",className:"button button_type_add",onClick:e.onAddCard})]}),Object(r.jsx)("section",{className:"places",children:Object(r.jsx)("ul",{className:"places__list",children:x.map((function(t,a){return Object(r.jsx)(m,{link:t.link,name:t.name,likes:t.likes.length,onCardClick:function(){return e.onCardClick(t)}},a)}))})})]})};var _=function(e){return Object(r.jsx)("div",{className:"popup popup_type_".concat(e.name," ").concat(e.isOpen?"popup_opened":""),onClick:e.onClose,children:Object(r.jsxs)("div",{className:"popup__container",children:[Object(r.jsx)("button",{type:"button","aria-label":"Close",className:"button button_type_close",onClick:e.onClose}),Object(r.jsx)("h3",{className:"popup__title",children:e.title}),Object(r.jsxs)("form",{method:"POST",name:"popup_type_".concat(e.name),className:"popup__form popup__form_type_".concat(e.name),noValidate:!!e.shouldNotValidate,children:[e.children,Object(r.jsx)("input",{type:"submit",value:"".concat(e.buttonValue),className:"button button_type_submit popup__button"})]})]})})};var O=function(e){return Object(r.jsx)("div",{className:"popup popup_type_image ".concat(e.isOpen?"popup_opened":""),onClick:e.onClose,children:Object(r.jsxs)("div",{className:"popup__container popup__container_type_image",children:[Object(r.jsx)("button",{type:"button","aria-label":"Close",className:"button button_type_close button_type_close_type_image",onClick:e.onClose}),Object(r.jsxs)("figure",{className:"popup__figure",children:[Object(r.jsx)("img",{className:"popup__image",src:e.card.link,alt:e.card.title}),Object(r.jsx)("figcaption",{className:"popup__caption",children:e.card.name})]})]})})};var x=function(){var e=Object(n.useState)(!1),t=Object(i.a)(e,2),a=t[0],s=t[1],c=Object(n.useState)(!1),l=Object(i.a)(c,2),p=l[0],b=l[1],d=Object(n.useState)(!1),j=Object(i.a)(d,2),h=j[0],m=j[1],x=Object(n.useState)(!1),v=Object(i.a)(x,2),k=v[0],y=v[1],N=Object(n.useState)({link:"",name:""}),g=Object(i.a)(N,2),C=g[0],E=g[1];function S(e){e.target===e.currentTarget&&(s(!1),b(!1),m(!1),y(!1))}return Object(r.jsx)("div",{className:"page",children:Object(r.jsxs)("div",{className:"page__container",children:[Object(r.jsx)(u,{}),Object(r.jsx)(f,{onEditAvatar:function(){s(!0)},onEditProfile:function(){b(!0)},onAddCard:function(){m(!0)},onCardClick:function(e){return function(e){E({link:e.link,name:e.name}),y(!0)}(e)}}),Object(r.jsx)(o,{}),Object(r.jsxs)(_,{name:"edit",title:"Edit profile",buttonValue:"Save",isOpen:p,onClose:S,children:[Object(r.jsxs)("label",{children:[Object(r.jsx)("input",{type:"text",name:"name",id:"profile-name",className:"popup__input popup__input_type_name",placeholder:"Name",required:!0,minLength:"2",maxLength:"40"}),Object(r.jsx)("span",{className:"popup__error",id:"profile-name-error"})]}),Object(r.jsxs)("label",{children:[Object(r.jsx)("input",{type:"text",name:"job",id:"profile-job",className:"popup__input popup__input_type_job",placeholder:"About me",required:!0,minLength:"2",maxLength:"200"}),Object(r.jsx)("span",{className:"popup__error",id:"profile-job-error"})]})]}),Object(r.jsx)(_,{name:"edit-avatar",title:"Change profile picture",buttonValue:"Save",isOpen:a,onClose:S,children:Object(r.jsxs)("label",{children:[Object(r.jsx)("input",{type:"url",name:"url",id:"profile-avatar",className:"popup__input",placeholder:"Image link",required:!0}),Object(r.jsx)("span",{className:"popup__error",id:"profile-avatar-error"})]})}),Object(r.jsxs)(_,{name:"add",title:"New place",buttonValue:"Create",isOpen:h,onClose:S,children:[Object(r.jsxs)("label",{children:[Object(r.jsx)("input",{type:"text",name:"title",id:"card-title",className:"popup__input popup__input_type_title",placeholder:"Title",required:!0,minLength:"2",maxLength:"30"}),Object(r.jsx)("span",{className:"popup__error",id:"card-title-error"})]}),Object(r.jsxs)("label",{children:[Object(r.jsx)("input",{type:"url",name:"url",id:"card-url",className:"popup__input popup__input_type_image-url",placeholder:"Image link",required:!0}),Object(r.jsx)("span",{className:"popup__error",id:"card-url-error"})]})]}),Object(r.jsx)(O,{card:C,isOpen:k,onClose:S})]})})},v=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,18)).then((function(t){var a=t.getCLS,r=t.getFID,n=t.getFCP,s=t.getLCP,c=t.getTTFB;a(e),r(e),n(e),s(e),c(e)}))};c.a.render(Object(r.jsx)(n.StrictMode,{children:Object(r.jsx)(x,{})}),document.getElementById("root")),v()}},[[17,1,2]]]);
//# sourceMappingURL=main.6a54de66.chunk.js.map